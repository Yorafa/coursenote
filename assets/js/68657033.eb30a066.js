"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3565],{3612:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>d,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"Operating Systems/Linux Programming/Signal","title":"Signal","description":"Segementation Fault Warning!!!!!! (not really lol)","source":"@site/docs/Operating Systems/Linux Programming/Signal.md","sourceDirName":"Operating Systems/Linux Programming","slug":"/Operating Systems/Linux Programming/Signal","permalink":"/docs/Operating Systems/Linux Programming/Signal","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Shell","permalink":"/docs/Operating Systems/Linux Programming/Shell"},"next":{"title":"Socket","permalink":"/docs/Operating Systems/Linux Programming/Socket"}}');var i=s(4848),r=s(8453);const d={},c="Signal",l={},h=[{value:"Signal in C",id:"signal-in-c",level:2}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"signal",children:"Signal"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Segementation Fault Warning!!!!!!"})," ",(0,i.jsx)(n.em,{children:"(not really lol)"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"#include <signal.h>"})}),"\n",(0,i.jsxs)(n.p,{children:["For our ",(0,i.jsx)(n.code,{children:"C Language"})," learner, signals is not strange, at least ",(0,i.jsx)(n.code,{children:"segment fault"})," is not. But there are more signals we are using. For example, ",(0,i.jsx)(n.code,{children:"ctrl + c"})," is the action send termination signal (",(0,i.jsx)(n.code,{children:"SIGINT"}),") to the current process. ",(0,i.jsx)(n.code,{children:"ctrl + z"})," is the action send suspending signal (",(0,i.jsx)(n.code,{children:"SIGSTOP"}),") and then we can use shell command ",(0,i.jsx)(n.code,{children:"fg"})," program to wake it up and use ",(0,i.jsx)(n.code,{children:"ps"})," to lookup current running prcoesses."]}),"\n",(0,i.jsxs)(n.p,{children:["And we can also use ",(0,i.jsx)(n.code,{children:"kill"})," to send ",(0,i.jsx)(n.code,{children:"SIGSTOP"})," by argument ",(0,i.jsx)(n.code,{children:"-STOP + pid"})," to suspend ",(0,i.jsx)(n.code,{children:"pid"})," process and also with argument ",(0,i.jsx)(n.code,{children:"-CONT + pid"})," to re-run this process. But Notice, ",(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"kill"})," program do not terminate a process"]}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Furthermore, signals can be sent by operation system but also users, but as programmer we can't know when a signal might arrive at process."}),"\n",(0,i.jsx)(n.p,{children:"Normally, we have 31 signals in linux system"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Num"}),(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1"}),(0,i.jsx)(n.td,{children:"SIGHUP"}),(0,i.jsx)(n.td,{children:"Hangup"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"2"}),(0,i.jsx)(n.td,{children:"SIGINT"}),(0,i.jsx)(n.td,{children:"Interrupt"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"3"}),(0,i.jsx)(n.td,{children:"SIGQUIT"}),(0,i.jsx)(n.td,{children:"Quit"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"4"}),(0,i.jsx)(n.td,{children:"SIGILL"}),(0,i.jsx)(n.td,{children:"Illegal instruction"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"5"}),(0,i.jsx)(n.td,{children:"SIGTRAP"}),(0,i.jsx)(n.td,{children:"trace/breakpoint trap"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"6"}),(0,i.jsx)(n.td,{children:"SIGABRT"}),(0,i.jsx)(n.td,{children:"Aborted"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"7"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"8"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"9"}),(0,i.jsx)(n.td,{children:"SIGKILL"}),(0,i.jsx)(n.td,{children:"killed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"10"}),(0,i.jsx)(n.td,{children:"SIGUSR1"}),(0,i.jsx)(n.td,{children:"User defined signal 1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"11"}),(0,i.jsx)(n.td,{children:"SIGSEGV"}),(0,i.jsx)(n.td,{children:"Segmentation fault"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"12"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"13"}),(0,i.jsx)(n.td,{children:"SIGPIPE"}),(0,i.jsx)(n.td,{children:"Broken pipe"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"14"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"15"}),(0,i.jsx)(n.td,{children:"SIGTERM"}),(0,i.jsx)(n.td,{children:"Terminated"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"16"}),(0,i.jsx)(n.td,{children:"SIGSTKFLT"}),(0,i.jsx)(n.td,{children:"Stack fault"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"17"}),(0,i.jsx)(n.td,{children:"SIGCHLD"}),(0,i.jsx)(n.td,{children:"child exited"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"18"}),(0,i.jsx)(n.td,{children:"SIGCONT"}),(0,i.jsx)(n.td,{children:"Continue"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"19"}),(0,i.jsx)(n.td,{children:"SIGSTOP"}),(0,i.jsx)(n.td,{children:"Stopped by signal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"20"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"21"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"22"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"23"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"24"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"25"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"26"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"27"}),(0,i.jsx)(n.td,{children:"SIGPROF"}),(0,i.jsx)(n.td,{children:"Profiling timer expired"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"28"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"29"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"30"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"31"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Notice: signal 9 and 19, can never be modified"}),"\n",(0,i.jsx)(n.h2,{id:"signal-in-c",children:"Signal in C"}),"\n",(0,i.jsxs)(n.p,{children:["To do action with signals, we should know the struct of ",(0,i.jsx)(n.code,{children:"sigaction"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"struct sigaction {\r\n    void (*sa_handler)(int);\r\n    void (*sa_sigaction)(int, siginfo_t *, void *);\r\n    sigset_t sa_mask;j\r\n    int sa_flags;\r\n}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sa_handler"})," is the action when ",(0,i.jsx)(n.code,{children:"signum"})," signal raise, we can change to a new function to act like we want"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sa_mask"})," point to a signal when the signal raise, the signal will be blocked"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sa_flags"})," can set different flags. if specifies as ",(0,i.jsx)(n.code,{children:"SA_SIGINFO"})," the ",(0,i.jsx)(n.code,{children:"sa_sigaction"})," will be action (instead of ",(0,i.jsx)(n.code,{children:"sa_hanlder"}),") when ",(0,i.jsx)(n.code,{children:"signum"})," raise"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"siginfo_t"}),"(a type) is different with ",(0,i.jsx)(n.code,{children:"SA_SIGINFO"})," (a flag). ",(0,i.jsx)(n.code,{children:"siginfo_t"})," is a structure with details about signal."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Then we can change the action when signal raise, by following:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"int sigemptyset(sigset_t* set)"}),":  initialize the signal set to empty, return 0 success, or -1 on error, and ",(0,i.jsx)(n.code,{children:"errno"})," is set to indicate the error."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"int sigaction(int signum, const struct sigaction *act, struct sigaction *oldact)"}),": (except signal 9 and 19) change the ",(0,i.jsx)(n.code,{children:"signum"})," signal action in ",(0,i.jsx)(n.code,{children:"act"})," and store the old version into ",(0,i.jsx)(n.code,{children:"oldact"}),". returns 0 on success; on error, -1 is returned, and ",(0,i.jsx)(n.code,{children:"errno"})," is set to indicate the error."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Notice, the new action of ",(0,i.jsx)(n.code,{children:"sa_handler"})," should have the same signature which take the same type and number of parameters."]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>c});var t=s(6540);const i={},r=t.createContext(i);function d(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);