"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3483],{4372:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>t});var s=i(5893),l=i(1151);const c={},d="Shell Programming",r={id:"csc/csc209/Shell",title:"Shell Programming",description:"Shell is a program that infinite looped to execute and interpreter command.",source:"@site/docs/csc/csc209/Shell.md",sourceDirName:"csc/csc209",slug:"/csc/csc209/Shell",permalink:"/docs/csc/csc209/Shell",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Select system call",permalink:"/docs/csc/csc209/Select"},next:{title:"Signal",permalink:"/docs/csc/csc209/Signal"}},o={},t=[{value:"Basic Command and Workflow",id:"basic-command-and-workflow",level:2},{value:"Variables",id:"variables",level:3},{value:"if ... else ...",id:"if--else-",level:3},{value:"while",id:"while",level:3},{value:"for loop",id:"for-loop",level:3},{value:"Switch",id:"switch",level:3},{value:"Redirection",id:"redirection",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"shell-programming",children:"Shell Programming"}),"\n",(0,s.jsx)(n.p,{children:"Shell is a program that infinite looped to execute and interpreter command."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"flowchart LR\n\tid1([Print Prompt]) --\x3e id2([Read a Command]) --\x3e id3([Parse Command]) --\x3e id4([Execute the Command]) --\x3eid1\n"})}),"\n",(0,s.jsxs)(n.p,{children:["We have two main kinds of ",(0,s.jsx)(n.code,{children:"sh"}),": ",(0,s.jsx)(n.code,{children:"csh"})," and ",(0,s.jsx)(n.code,{children:"sh"}),", ",(0,s.jsx)(n.code,{children:"csh"})," is far behind . Thus we will use ",(0,s.jsx)(n.code,{children:"bash"})," from ",(0,s.jsx)(n.code,{children:"sh"})," to do shell programming"]}),"\n",(0,s.jsx)(n.h2,{id:"basic-command-and-workflow",children:"Basic Command and Workflow"}),"\n",(0,s.jsxs)(n.p,{children:["Shell Programming basically combine most Linux Command and write it in some way in a ",(0,s.jsx)(n.code,{children:"sh"})," file so that ",(0,s.jsx)(n.code,{children:"bash"})," can interpreter and execute it."]}),"\n",(0,s.jsxs)(n.p,{children:["If a command produces output that we want to discard, we redirect it to ",(0,s.jsx)(n.code,{children:"/dev/null"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Some Command we always use like:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"echo"}),": we can followed string,  to print this string in the shell window","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Notice: to use some symbol like ? we should write '?' to avoid do specific action for ?, similar as ?, if we write ",(0,s.jsx)(n.code,{children:"*.c"})," it will not print *.c, instead of it, it will print all files who with name ",(0,s.jsx)(n.code,{children:".c"}),"  followed"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"exec"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"variables",children:"Variables"}),"\n",(0,s.jsx)(n.p,{children:"For programming, we always need many variables to help us work. In shell programing, we declare a variable:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"<Variable Name>=<Value>"}),": where we can pick name to replace <>(include all inside) to create variable and assign value in it"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For example, ",(0,s.jsx)(n.code,{children:"i=1"})," is set variable ",(0,s.jsx)(n.code,{children:"i"})," and it has a value of ",(0,s.jsx)(n.code,{children:"1"})]}),"\n",(0,s.jsxs)(n.li,{children:["Notice, we can not do any operation for assign value to variable, e.g. ",(0,s.jsx)(n.code,{children:"i=i+1"})," has a value of ",(0,s.jsx)(n.code,{children:"i+1"})," not the value of ",(0,s.jsx)(n.code,{children:"i"})," + 1"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$<Variable Name>"}),": just like the macro, we add ",(0,s.jsx)(n.code,{children:"$"})," and ",(0,s.jsx)(n.code,{children:"sh"})," will know the following to be replaced as variables value"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For example, run ",(0,s.jsx)(n.code,{children:"i=vim"})," and then run ",(0,s.jsx)(n.code,{children:"$i test"})," is just the same as ",(0,s.jsx)(n.code,{children:"vim test"})]}),"\n",(0,s.jsxs)(n.li,{children:["another example, run ",(0,s.jsx)(n.code,{children:"i=vim"})," and then run ",(0,s.jsx)(n.code,{children:"echo $i"})," will print out ",(0,s.jsx)(n.code,{children:"vim"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"To do operation assign, we need to use `expr`  in the given assign"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"i=`expr 4 + 2`\n$i\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In the example above the ",(0,s.jsx)(n.code,{children:"i"})," will have a value of 6. but notice it will only work for integer"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Notice, some symbol need use ",(0,s.jsx)(n.code,{children:"\\"})," to declare as operation not a command"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"read"})," : the input function of shell"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["e.g. run ",(0,s.jsx)(n.code,{children:"read name"}),", then we have a variable ",(0,s.jsx)(n.code,{children:"name"})," with the value of input"]}),"\n",(0,s.jsx)(n.li,{children:"Since Linux uses white spaces to separate argument, then read also can read many variables. The input also should be separate by white space, if there is not enough value to assign, then the extra variables will be empty. Similarly, if there are more input, then the last variables will be assign all of the remain input."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$?"})," : a special variable to store last command status. If 1 fail or 0 success"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$#"}),": the number of arguments"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$num"}),": the ",(0,s.jsx)(n.code,{children:"num"}),"th arg, if no specifical definition of num"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$*"}),"\uff1a all args"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$@"}),":  target, or remain"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Difference between ",(0,s.jsx)(n.code,{children:"''"}),", ",(0,s.jsx)(n.code,{children:'""'})," and no quoting:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"''"}),": show all string and do nothing with special symbols"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:'""'}),": show all string and show the value of variables if has ",(0,s.jsx)(n.code,{children:"$"})," before variable name,  symbol after",(0,s.jsx)(n.code,{children:"\\"}),",  content in ``"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["no quoting: interpreter all symbols, e.g. ",(0,s.jsx)(n.code,{children:">"})," will redirect output into followed name file"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"quoting will make the whole string as an argument, but no quoting will see each token separated by white space as different argument. An example following showing the difference"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"f='a b'\ncat $f\ncat: a: No such file or directory\ncat: b: No such file or directory\ncat \"$f\"\nxxxx\ncat '$f'\ncat: a: No such file or directory\ncat: b: No such file or directory\n"})}),"\n",(0,s.jsx)(n.h3,{id:"if--else-",children:"if ... else ..."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"if conditions\nthen\n\tcommands\nelif conditions\nthen\n\tcommands\nelse\n\tcommands\nfi\n"})}),"\n",(0,s.jsx)(n.p,{children:"Shell has if statement like above."}),"\n",(0,s.jsx)(n.p,{children:"For conditions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"we can use the success status of commands as conditions"}),"\n",(0,s.jsxs)(n.li,{children:["If we want comparation for variables, we should use ",(0,s.jsx)(n.code,{children:"test"})," command before comparation","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["e.g. ",(0,s.jsx)(n.code,{children:"test 3 -lt 4"})]}),"\n",(0,s.jsxs)(n.li,{children:["Notice we should use argument like ",(0,s.jsx)(n.code,{children:"-gt"}),", ",(0,s.jsx)(n.code,{children:"-lt"}),", ",(0,s.jsx)(n.code,{children:"-eq"}),", ",(0,s.jsx)(n.code,{children:"-ge"}),", ",(0,s.jsx)(n.code,{children:"-le"}),", ",(0,s.jsx)(n.code,{children:"-ne"})," to compare integer"]}),"\n",(0,s.jsxs)(n.li,{children:["use argument ",(0,s.jsx)(n.code,{children:"="}),", ",(0,s.jsx)(n.code,{children:"!="})," to compare strings"]}),"\n",(0,s.jsxs)(n.li,{children:["We can use ",(0,s.jsx)(n.code,{children:"test"})," to test file","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-f filename"})," : file exists and is a plain file"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-d filename"}),": file exists and is a directory"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-s filename"}),": file exists and is a plain file with size larger than 0"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["More look at the man page of ",(0,s.jsx)(n.code,{children:"test"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["we can also use ",(0,s.jsx)(n.code,{children:"[ "})," and ",(0,s.jsx)(n.code,{children:"]"})," instead of ",(0,s.jsx)(n.code,{children:"test"}),", but be careful with the white space"]}),"\n",(0,s.jsxs)(n.li,{children:["we can use ",(0,s.jsx)(n.code,{children:":"})," as ",(0,s.jsx)(n.code,{children:"pass"})," in python"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"while",children:"while"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"while conditions\ndo\n\tcommands\ndone\n"})}),"\n",(0,s.jsx)(n.p,{children:"A basic shell while statement"}),"\n",(0,s.jsx)(n.h3,{id:"for-loop",children:"for loop"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"for var in arg1 arg2 ...\ndo\n\tcommands\ndone\n"})}),"\n",(0,s.jsx)(n.p,{children:"A basic shell for statement"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"seq"}),": Linux command create sequence by following 2/3 args"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"2 args: start end"}),"\n",(0,s.jsx)(n.li,{children:"3 args: start step end"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"we also can write"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"for i\ndo\n\tcommands\ndone\n"})}),"\n",(0,s.jsx)(n.p,{children:"we will loop all arguments"}),"\n",(0,s.jsx)(n.h3,{id:"switch",children:"Switch"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"for i\ndo \n\tcase $i in\n\t\topt1)\n\t\t\tcommands\n\t\t\t;;\n\t\topt2)\n\t\t\tcommands\n\t\t\t;;\n\t\t*)\n\t\t\tcommands\n\t\t\t;;\n\tesac\ndone\n"})}),"\n",(0,s.jsx)(n.p,{children:"basic switch statement"}),"\n",(0,s.jsx)(n.h2,{id:"redirection",children:"Redirection"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"A > B"}),":  overwrite ",(0,s.jsx)(n.code,{children:"A"}),"'s output from ",(0,s.jsx)(n.code,{children:"stdout"})," into ",(0,s.jsx)(n.code,{children:"B"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"A < B"}),":  use ",(0,s.jsx)(n.code,{children:"B"})," as input"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"A >> B"}),":  write ",(0,s.jsx)(n.code,{children:"A"}),"'s output follow original ",(0,s.jsx)(n.code,{children:"B"}),"'s data into ",(0,s.jsx)(n.code,{children:"B"})]}),"\n",(0,s.jsxs)(n.p,{children:["if we want to use the ",(0,s.jsx)(n.code,{children:"stdin"}),", ",(0,s.jsx)(n.code,{children:"stdout"}),", ",(0,s.jsx)(n.code,{children:"stderr"}),", write the representative number just before the symbol without white space or ",(0,s.jsx)(n.code,{children:"&num"})," after the symbol"]}),"\n",(0,s.jsxs)(n.p,{children:["Notice: ",(0,s.jsx)(n.code,{children:"2 >B"})," is different with ",(0,s.jsx)(n.code,{children:"2>B"}),", ",(0,s.jsx)(n.code,{children:"2 >B"})," will exec a file named ",(0,s.jsx)(n.code,{children:"2"}),", but ",(0,s.jsx)(n.code,{children:"2>B"})," will write the ",(0,s.jsx)(n.code,{children:"stderr"})," into B. And ",(0,s.jsx)(n.code,{children:">&2"})," mean output to ",(0,s.jsx)(n.code,{children:"stderr"})]})]})}function h(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>r,a:()=>d});var s=i(7294);const l={},c=s.createContext(l);function d(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);