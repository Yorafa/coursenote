"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8888],{9511:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>i,contentTitle:()=>l,default:()=>m,frontMatter:()=>c,metadata:()=>a,toc:()=>o});var n=t(5893),r=t(1151);const c={},l="System Call",a={id:"csc/csc369/02 system call",title:"System Call",description:"As we talked in 0 OS isolate user programs from each other, but sometimes we need them communicate with each other. OS provides service to user programs through system call. System call is a function call that invokes the OS. Whenever an application wants to use a resource that the OS manages, it asks permission from the OS through a system call.",source:"@site/docs/csc/csc369/02 system call.md",sourceDirName:"csc/csc369",slug:"/csc/csc369/02 system call",permalink:"/docs/csc/csc369/02 system call",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Process",permalink:"/docs/csc/csc369/01 process"},next:{title:"Thread",permalink:"/docs/csc/csc369/03 thread"}},i={},o=[];function h(e){const s={code:"code",h1:"h1",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"system-call",children:"System Call"}),"\n",(0,n.jsxs)(s.p,{children:["As we talked in 0 OS isolate user programs from each other, but sometimes we need them communicate with each other. OS provides service to user programs through ",(0,n.jsx)(s.strong,{children:"system call"}),". System call is a function call that invokes the OS. Whenever an application wants to use a resource that the OS manages, it asks permission from the OS through a system call."]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"system call are OS specific"}),"\n",(0,n.jsx)(s.li,{children:"system call enforces separation of user to kernel mode"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"When we call system call, kernel must verify arguments that it is passed to protect kernel from misbehaving processes"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"prevent kernel creash or malfunction from invalid argument"}),"\n",(0,n.jsx)(s.li,{children:"prevent security issues"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"When we dispatch system call:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"kernel assigns each system call a system call number"}),"\n",(0,n.jsx)(s.li,{children:"kernel initializes system call table, mapping each system call number to a function implementing that system call"}),"\n",(0,n.jsx)(s.li,{children:"User processs sets up system call number and arguments"}),"\n",(0,n.jsx)(s.li,{children:"User process runs system call instruction"}),"\n",(0,n.jsx)(s.li,{children:"Hardware switches to kernel mode and invokes system call handler"}),"\n",(0,n.jsx)(s.li,{children:"Kernel looks up system call table using system call number"}),"\n",(0,n.jsx)(s.li,{children:"Kernel invokes the corresponding function"}),"\n",(0,n.jsx)(s.li,{children:"kernel returns to user process by interrupt return"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["When pass parameters to system call, the first parameter (",(0,n.jsx)(s.code,{children:"%rax"})," (syscall number)) is always the syscall number, and can pass up to 6 parameters, the registers are:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"%rbx"}),", ",(0,n.jsx)(s.code,{children:"%rcx"}),", ",(0,n.jsx)(s.code,{children:"%rdx"}),", ",(0,n.jsx)(s.code,{children:"%rsi"}),", ",(0,n.jsx)(s.code,{children:"%rdi"}),", ",(0,n.jsx)(s.code,{children:"%rbp"})]}),"\n",(0,n.jsx)(s.li,{children:"if more than 6 parameters are needed, all rest should be packaged and pass through it as the 6th parameter"}),"\n"]})]})}function m(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},1151:(e,s,t)=>{t.d(s,{Z:()=>a,a:()=>l});var n=t(7294);const r={},c=n.createContext(r);function l(e){const s=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(c.Provider,{value:s},e.children)}}}]);