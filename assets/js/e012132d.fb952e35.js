"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9299],{5218:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>l,default:()=>a,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var i=n(5893),c=n(1151);const r={},l="Process Model",t={id:"csc/csc209/ProcessModel",title:"Process Model",description:"We can design program that run other program. We should first know:",source:"@site/docs/csc/csc209/ProcessModel.md",sourceDirName:"csc/csc209",slug:"/csc/csc209/ProcessModel",permalink:"/docs/csc/csc209/ProcessModel",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Pointer and Memory",permalink:"/docs/csc/csc209/Pointer & Memory"},next:{title:"Read & Write in File",permalink:"/docs/csc/csc209/Read&Write in file"}},o={},d=[{value:"Use System Call create Process",id:"use-system-call-create-process",level:2},{value:"Process Ordering",id:"process-ordering",level:2},{value:"Conclusion with example",id:"conclusion-with-example",level:2},{value:"Some system function",id:"some-system-function",level:2}];function h(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,c.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{id:"process-model",children:"Process Model"}),"\n",(0,i.jsx)(s.p,{children:"We can design program that run other program. We should first know:"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Program"}),": The ",(0,i.jsx)(s.em,{children:"executable"})," instructions of a program, it either can be:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Source Code"}),"\n",(0,i.jsx)(s.li,{children:"Compiled machine code"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Process"}),": Running instance of a program"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Machine code of the program"}),"\n",(0,i.jsxs)(s.li,{children:["Infor about current state, presented by","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Code"}),"\n",(0,i.jsx)(s.li,{children:"Global"}),"\n",(0,i.jsx)(s.li,{children:"Heap"}),"\n",(0,i.jsx)(s.li,{children:"Stack"}),"\n",(0,i.jsx)(s.li,{children:"Notice: Memory is not shared between processes."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:"operating system decides process order"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Process hold by a ",(0,i.jsx)(s.strong,{children:"Process Control Block"})]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"PID (Process ID): the id of current process"}),"\n",(0,i.jsx)(s.li,{children:"PC (Program Counter): the next instruction to be executed"}),"\n",(0,i.jsx)(s.li,{children:"SP (Stack Pointer): identifies the top of stack"}),"\n",(0,i.jsx)(s.li,{children:"actions"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["The number ",(0,i.jsx)(s.strong,{children:"processor"})," labeled as CPUs control how many processes can be executing an instruction at the same time."]}),"\n",(0,i.jsx)(s.p,{children:"Processes in different states:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Running State: the running processes"}),"\n",(0,i.jsx)(s.li,{children:"Ready State: the processes wait CPUs available"}),"\n",(0,i.jsx)(s.li,{children:"Blocked State the processes wait an event to occur"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"use-system-call-create-process",children:"Use System Call create Process"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"fork"}),": create a child process (duplicate a process)"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"same code with parent process; same PC, SP"}),"\n",(0,i.jsx)(s.li,{children:"variable value may difference with using parent/child process (like PID)"}),"\n",(0,i.jsx)(s.li,{children:"inherit most variable values, even loops"}),"\n",(0,i.jsx)(s.li,{children:"different PID"}),"\n",(0,i.jsxs)(s.li,{children:["different return value (child process return PID or -1 when fails)","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"return 0 in child process (parent fork child, child fork)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"execl"}),": the same process to execute different code, will not return back to original code if not fails"]}),"\n",(0,i.jsx)(s.h2,{id:"process-ordering",children:"Process Ordering"}),"\n",(0,i.jsxs)(s.p,{children:["If a parent process terminates before children processes terminate, then the children's parent will be PID 1 process (",(0,i.jsx)(s.code,{children:"init process"}),"), that is 'children'(orphan) become 'parent'"]}),"\n",(0,i.jsx)(s.p,{children:"If the children  process terminate but without parent call, then the termination status will be collected. As the parent process terminates, those process will be deleted."}),"\n",(0,i.jsx)(s.h2,{id:"conclusion-with-example",children:"Conclusion with example"}),"\n",(0,i.jsx)(s.p,{children:"when we run program on shell"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"shell"})," is a  process, t use ",(0,i.jsx)(s.code,{children:"fork"})," execute the program we ask as a new process"]}),"\n",(0,i.jsxs)(s.li,{children:["this child process call ",(0,i.jsx)(s.code,{children:"execl"})," to load different program"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"shell"})," call ",(0,i.jsx)(s.code,{children:"wait"})," and  blocks 'till the child process finishes executing"]}),"\n",(0,i.jsxs)(s.li,{children:["process terminated, ",(0,i.jsx)(s.code,{children:"shell"})," ready for next command"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"some-system-function",children:"Some system function"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"int getpid()"}),": get process id of current process"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"int getppid()"}),": get parent process id of current process"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"usleep"}),": suspend execution for microsecond intervals"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"int wait()"}),": wait for process termination (only for child process)","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"WIFEXITED(int status)"}),": true if child process ended normally","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"WEXITSTATUS(int status)"}),": get the exit code of child process"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"WIFSIGNALED(int status)"}),":  True when a signal caused to exit","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"WTERMSIG(int status)"}),": Use to determine which signal raised by the child process to terminate"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"WIFSTOPPED(int status)"}),": True when child process stopped","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"WSTOPSIG(int status)"}),": Determine which signal stopped child process"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"int waitpid(int pid, int *stat, int options)"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"options = WNOHANG"})," return ",(0,i.jsx)(s.code,{children:"-1"})," immediately instead waiting if no child process ready to be noticed and set ",(0,i.jsx)(s.code,{children:"ERRNO"})," to ",(0,i.jsx)(s.code,{children:"ECHILD"})," (means no child process), else ",(0,i.jsx)(s.code,{children:"0"}),"exists some zombie child process"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"abort"}),": cause abnormal process termination"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"pipe"}),": create pipe"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"signal"}),": ANSI C signal handling"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"int execl(const char*path, const char*arg0,...)"}),":  execute a file"]}),"\n",(0,i.jsxs)(s.li,{children:["there are family of ",(0,i.jsx)(s.code,{children:"execl"})," function, we can determinate what we want to use by the letter:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"l"}),": list"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"v"}),": vector"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"p"}),": path (no ",(0,i.jsx)(s.code,{children:"p"})," means empty path or path already given)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"e"}),": environment"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"int execvp(const char *file, char * argv[])"}),":"]}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,c.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>t,a:()=>l});var i=n(7294);const c={},r=i.createContext(c);function l(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);