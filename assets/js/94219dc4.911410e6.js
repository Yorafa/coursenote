"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2313],{7468:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>o,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var t=n(5893),d=n(1151);const i={},r="Signal",c={id:"csc/csc209/Signal",title:"Signal",description:"Segementation Fault Warning!!!!!! (not really lol)",source:"@site/docs/csc/csc209/Signal.md",sourceDirName:"csc/csc209",slug:"/csc/csc209/Signal",permalink:"/docs/csc/csc209/Signal",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Shell Programming",permalink:"/docs/csc/csc209/Shell"},next:{title:"Socket",permalink:"/docs/csc/csc209/Socket"}},l={},h=[{value:"Signal in C",id:"signal-in-c",level:2}];function a(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"signal",children:"Signal"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Segementation Fault Warning!!!!!!"})," ",(0,t.jsx)(s.em,{children:"(not really lol)"})]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"#include <signal.h>"})}),"\n",(0,t.jsxs)(s.p,{children:["For our ",(0,t.jsx)(s.code,{children:"C Language"})," learner, signals is not strange, at least ",(0,t.jsx)(s.code,{children:"segment fault"})," is not. But there are more signals we are using. For example, ",(0,t.jsx)(s.code,{children:"ctrl + c"})," is the action send termination signal (",(0,t.jsx)(s.code,{children:"SIGINT"}),") to the current process. ",(0,t.jsx)(s.code,{children:"ctrl + z"})," is the action send suspending signal (",(0,t.jsx)(s.code,{children:"SIGSTOP"}),") and then we can use shell command ",(0,t.jsx)(s.code,{children:"fg"})," program to wake it up and use ",(0,t.jsx)(s.code,{children:"ps"})," to lookup current running prcoesses."]}),"\n",(0,t.jsxs)(s.p,{children:["And we can also use ",(0,t.jsx)(s.code,{children:"kill"})," to send ",(0,t.jsx)(s.code,{children:"SIGSTOP"})," by argument ",(0,t.jsx)(s.code,{children:"-STOP + pid"})," to suspend ",(0,t.jsx)(s.code,{children:"pid"})," process and also with argument ",(0,t.jsx)(s.code,{children:"-CONT + pid"})," to re-run this process. But Notice, ",(0,t.jsxs)(s.strong,{children:[(0,t.jsx)(s.code,{children:"kill"})," program do not terminate a process"]}),"."]}),"\n",(0,t.jsx)(s.p,{children:"Furthermore, signals can be sent by operation system but also users, but as programmer we can't know when a signal might arrive at process."}),"\n",(0,t.jsx)(s.p,{children:"Normally, we have 31 signals in linux system"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Num"}),(0,t.jsx)(s.th,{children:"Name"}),(0,t.jsx)(s.th,{children:"description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"1"}),(0,t.jsx)(s.td,{children:"SIGHUP"}),(0,t.jsx)(s.td,{children:"Hangup"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"2"}),(0,t.jsx)(s.td,{children:"SIGINT"}),(0,t.jsx)(s.td,{children:"Interrupt"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"3"}),(0,t.jsx)(s.td,{children:"SIGQUIT"}),(0,t.jsx)(s.td,{children:"Quit"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"4"}),(0,t.jsx)(s.td,{children:"SIGILL"}),(0,t.jsx)(s.td,{children:"Illegal instruction"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"5"}),(0,t.jsx)(s.td,{children:"SIGTRAP"}),(0,t.jsx)(s.td,{children:"trace/breakpoint trap"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"6"}),(0,t.jsx)(s.td,{children:"SIGABRT"}),(0,t.jsx)(s.td,{children:"Aborted"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"7"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"8"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"9"}),(0,t.jsx)(s.td,{children:"SIGKILL"}),(0,t.jsx)(s.td,{children:"killed"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"10"}),(0,t.jsx)(s.td,{children:"SIGUSR1"}),(0,t.jsx)(s.td,{children:"User defined signal 1"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"11"}),(0,t.jsx)(s.td,{children:"SIGSEGV"}),(0,t.jsx)(s.td,{children:"Segmentation fault"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"12"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"13"}),(0,t.jsx)(s.td,{children:"SIGPIPE"}),(0,t.jsx)(s.td,{children:"Broken pipe"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"14"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"15"}),(0,t.jsx)(s.td,{children:"SIGTERM"}),(0,t.jsx)(s.td,{children:"Terminated"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"16"}),(0,t.jsx)(s.td,{children:"SIGSTKFLT"}),(0,t.jsx)(s.td,{children:"Stack fault"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"17"}),(0,t.jsx)(s.td,{children:"SIGCHLD"}),(0,t.jsx)(s.td,{children:"child exited"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"18"}),(0,t.jsx)(s.td,{children:"SIGCONT"}),(0,t.jsx)(s.td,{children:"Continue"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"19"}),(0,t.jsx)(s.td,{children:"SIGSTOP"}),(0,t.jsx)(s.td,{children:"Stopped by signal"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"20"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"21"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"22"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"23"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"24"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"25"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"26"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"27"}),(0,t.jsx)(s.td,{children:"SIGPROF"}),(0,t.jsx)(s.td,{children:"Profiling timer expired"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"28"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"29"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"30"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"31"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]})]})]}),"\n",(0,t.jsx)(s.p,{children:"Notice: signal 9 and 19, can never be modified"}),"\n",(0,t.jsx)(s.h2,{id:"signal-in-c",children:"Signal in C"}),"\n",(0,t.jsxs)(s.p,{children:["To do action with signals, we should know the struct of ",(0,t.jsx)(s.code,{children:"sigaction"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-c",children:"struct sigaction {\n    void (*sa_handler)(int);\n    void (*sa_sigaction)(int, siginfo_t *, void *);\n    sigset_t sa_mask;j\n    int sa_flags;\n}\n"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"sa_handler"})," is the action when ",(0,t.jsx)(s.code,{children:"signum"})," signal raise, we can change to a new function to act like we want"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"sa_mask"})," point to a signal when the signal raise, the signal will be blocked"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"sa_flags"})," can set different flags. if specifies as ",(0,t.jsx)(s.code,{children:"SA_SIGINFO"})," the ",(0,t.jsx)(s.code,{children:"sa_sigaction"})," will be action (instead of ",(0,t.jsx)(s.code,{children:"sa_hanlder"}),") when ",(0,t.jsx)(s.code,{children:"signum"})," raise"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"siginfo_t"}),"(a type) is different with ",(0,t.jsx)(s.code,{children:"SA_SIGINFO"})," (a flag). ",(0,t.jsx)(s.code,{children:"siginfo_t"})," is a structure with details about signal."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Then we can change the action when signal raise, by following:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"int sigemptyset(sigset_t* set)"}),":  initialize the signal set to empty, return 0 success, or -1 on error, and ",(0,t.jsx)(s.code,{children:"errno"})," is set to indicate the error."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"int sigaction(int signum, const struct sigaction *act, struct sigaction *oldact)"}),": (except signal 9 and 19) change the ",(0,t.jsx)(s.code,{children:"signum"})," signal action in ",(0,t.jsx)(s.code,{children:"act"})," and store the old version into ",(0,t.jsx)(s.code,{children:"oldact"}),". returns 0 on success; on error, -1 is returned, and ",(0,t.jsx)(s.code,{children:"errno"})," is set to indicate the error."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Notice, the new action of ",(0,t.jsx)(s.code,{children:"sa_handler"})," should have the same signature which take the same type and number of parameters."]})]})}function o(e={}){const{wrapper:s}={...(0,d.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>c,a:()=>r});var t=n(7294);const d={},i=t.createContext(d);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);