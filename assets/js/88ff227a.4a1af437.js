"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3583],{2870:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"Blog Backup/\u8fde\u8fde\u770b","title":"\u8fde\u8fde\u770b","description":"\u6700\u8fd1\u5728\u73a9sumikko farm, \u5b83\u6709\u4e00\u4e2atwo turn puzzle\u76f8\u5173\u7684\u6d3b\u52a8. \u5177\u4f53\u5982\u4e0b\u56fe![[test.png]]","source":"@site/docs/Blog Backup/\u8fde\u8fde\u770b.md","sourceDirName":"Blog Backup","slug":"/Blog Backup/\u8fde\u8fde\u770b","permalink":"/docs/Blog Backup/\u8fde\u8fde\u770b","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u53ef\u4ee5\u5199\u7684\u4e1c\u897f","permalink":"/docs/Blog Backup/\u53ef\u4ee5\u5199\u7684\u4e1c\u897f"},"next":{"title":"Database","permalink":"/docs/Database/"}}');var s=r(4848),t=r(8453);const i={},l=void 0,c={},o=[{value:"\u51c6\u5907\u9636\u6bb5",id:"\u51c6\u5907\u9636\u6bb5",level:3},{value:"gameboard",id:"gameboard",level:3},{value:"\u96be\u70b91: \u540c\u7c7b\u578b\u5f52\u9879",id:"\u96be\u70b91-\u540c\u7c7b\u578b\u5f52\u9879",level:4},{value:"\u89e3\u51b3\u601d\u8def:",id:"\u89e3\u51b3\u601d\u8def",level:4},{value:"\u96be\u70b92: \u540c\u6a21\u4e0d\u540c\u8272",id:"\u96be\u70b92-\u540c\u6a21\u4e0d\u540c\u8272",level:4},{value:"\u89e3\u51b3\u601d\u8def:",id:"\u89e3\u51b3\u601d\u8def-1",level:4},{value:"\u89e3\u6cd5",id:"\u89e3\u6cd5",level:3}];function d(e){const n={a:"a",annotation:"annotation",code:"code",h3:"h3",h4:"h4",math:"math",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",p:"p",pre:"pre",semantics:"semantics",span:"span",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"\u6700\u8fd1\u5728\u73a9sumikko farm, \u5b83\u6709\u4e00\u4e2atwo turn puzzle\u76f8\u5173\u7684\u6d3b\u52a8. \u5177\u4f53\u5982\u4e0b\u56fe![[test.png]]\r\n\u6e38\u620f\u89c4\u5219\u4e5f\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u8fde\u63a5\u4e24\u4e2a\u76f8\u540c\u56fe\u6848\uff0c\u4f46\u786e\u4fdd\u8fde\u63a5\u7684\u8def\u5f84\u4e2d\u4e0d\u80fd\u6709\u56fe\u6848\u4e14\u6700\u591a\u53ea\u80fd\u6709\u4e24\u4e2aturn.\r\n\u4e3a\u4e86\u505a\u8fd9\u4e2a\u6d3b\u52a8\u6211\u7ede\u5c3d\u8111\u6c41\u7684\u73a9\u4e86\u4e00\u5929\u7684puzzle. \u4f46\u604d\u60da\u95f4\u6211\u7a81\u7136\u610f\u8bc6\u5230\uff0c\u6211\u662f\u4e00\u4e2a\u7a0b\u5e8f\u5458\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u5199\u4e00\u4e2a\u811a\u672c\u6765\u73a9\u5462\uff1f"}),"\n",(0,s.jsx)(n.h3,{id:"\u51c6\u5907\u9636\u6bb5",children:"\u51c6\u5907\u9636\u6bb5"}),"\n",(0,s.jsxs)(n.p,{children:["\u8bf4\u5e72\u5c31\u5e72\uff0c\u9996\u5148\u4e0d\u80fd\u505a\u4e00\u4e9b\u660e\u663e\u8fdd\u6cd5\u7684\u884c\u4e3a\u6bd4\u5982\u6539\u6570\u636e\u4e00\u7c7b\u7684\u3002\u90a3\u53ea\u80fd\u6a21\u62df\u81ea\u5df1\u73a9\u4e86\u3002\u8fd9\u65f6\u5019\u6211\u5c31\u60f3\u5230python\u7684",(0,s.jsx)(n.a,{href:"https://pyautogui.readthedocs.io/en/latest/",children:"pyautogui"}),"\u5e93. PyAutoGUI lets your Python scripts control the mouse and keyboard to automate interactions with other applications. \u8fd9\u5f88\u7b26\u5408\u6211\u4eec\u7684\u9700\u8981\uff0c\u63a5\u4e0b\u6765\u6211\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f\u76f4\u63a5\u628apuzzle\u7684gameboard\u6570\u7ec4\u5316\uff0c\u7136\u540e\u8dd1\u89e3\u5c31\u53ef\u4ee5\u4e86\uff01"]}),"\n",(0,s.jsx)(n.h3,{id:"gameboard",children:"gameboard"}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u662f\u7528\u622a\u56fe\u5de5\u5177\u627e\u5230\u4e86puzzle board\u7684\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u7684\u4f4d\u7f6e\uff0c\u5e76\u4f7f\u7528",(0,s.jsx)(n.a,{href:"https://python-pillow.org/",children:"pillow"}),"\u8fdb\u884c\u622a\u56fe, \u5177\u4f53\u4ee3\u7801\u5982\u4e0b"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from PIL import Image, ImageGrab\r\nIMAGEPOS1 = (294, 453)\r\nIMAGEPOS2 = (1240, 969)\r\nCOL = 11\r\nROW = 6\r\nMAX_TURN = 2\r\nBOXES = 35\r\nPIC_WIDTH = (IMAGEPOS2[0] - IMAGEPOS1[0]) / COL\r\nPIC_HEIGHT = (IMAGEPOS2[1] - IMAGEPOS1[1]) / ROW\r\nimage = ImageGrab.grab(bbox=(IMAGEPOS1[0], IMAGEPOS1[1], IMAGEPOS2[0], IMAGEPOS2[1]))\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\u5c31\u76f4\u63a5\u6839\u636e\u884c\u548c\u5217\u62c6\u5206\u6bcf\u5f20\u5c0f\u56fe"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"minigame_board = [[-1] * (COL + 2) for _ in range(ROW + 2)]\r\nfor i in range(ROW):\r\n\tfor j in range(COL):\r\n\t\tsmall_image = image.crop((j * PIC_WIDTH, i * PIC_HEIGHT, (j + 1) * PIC_WIDTH, (i + 1) * PIC_HEIGHT))\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u7136\u540e\u63a5\u4e0b\u6765\u518d\u5bf9\u6bd4\u6bcf\u5f20\u56fe\u7247, \u628a\u540c\u7c7b\u578b\u5f52\u9879\u5373\u53ef\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"\u96be\u70b91-\u540c\u7c7b\u578b\u5f52\u9879",children:"\u96be\u70b91: \u540c\u7c7b\u578b\u5f52\u9879"}),"\n",(0,s.jsxs)(n.p,{children:["\u539f\u672c\u51c6\u5907\u4f7f\u7528",(0,s.jsx)(n.a,{href:"https://github.com/benhoyt/dhash",children:"dhash(\u53c2\u8003)"}),"\uff0c\u56e0\u4e3adhash is good for finding exact duplicates and near duplicates. \u4f46\u662f\u56e0\u4e3a\u6bd5\u7adf\u4f7f\u7528\u6a21\u62df\u5668\u73a9\u624b\u673a + \u4f7f\u7528\u622a\u56fe\u5de5\u5177\u624b\u52a8\u627e\u5230gameboard\uff0c\u8fd9\u90fd\u5bfc\u81f4\u6bcf\u5f20\u5c0f\u56fe\u5e76\u4e0d\u662f\u5b8c\u7f8e\u8d34\u5408\uff0c\u4ed6\u4eec\u7684\u8fb9\u8ddd\u90fd\u6709\u4e9b\u8bb8\u53d8\u5316\u3002\u8fd9\u5bfc\u81f4dhash\u6839\u672c\u65e0\u6cd5\u4f7f\u7528\u3002"]}),"\n",(0,s.jsx)(n.h4,{id:"\u89e3\u51b3\u601d\u8def",children:"\u89e3\u51b3\u601d\u8def:"}),"\n",(0,s.jsxs)(n.p,{children:["\u4f7f\u7528",(0,s.jsx)(n.a,{href:"https://opencv.org/get-started/",children:"opencv-python"}),"\u7684template matching. \u4f46\u8fd9\u5e26\u6765\u4e86\u5927\u91cf\u5de5\u4f5c\uff0c\u6211\u9700\u8981\u5bf9\u6bcf\u4e00\u4e2a\u7c7b\u578b\u7684\u56fe\u7247\u8fdb\u884c\u624b\u52a8\u7684\u4fee\u526a\u4ee5\u786e\u4fdd\u6bcf\u5f20\u56fe\u7247\u90fd\u80fd\u88abmatch.  \u4ee3\u7801\u5982\u4e0b:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import cv2\r\nimport numpy as np\r\nimg = cv2.cvtColor(np.array(img), cv2.COLOR_RGB2BGR)\r\ntemplate = cv2.cvtColor(np.array(template), cv2.COLOR_RGB2BGR)\r\nres = cv2.matchTemplate(img, template, cv2.TM_CCOEFF_NORMED)\r\nmin_val, max_val, min_loc, max_loc = cv2.minMaxLoc(res)\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u6837\u4e00\u6765\u5bf9\u4e8e\u6bcf\u5f20\u5c0f\u56fe, \u6211\u53ea\u9700\u8981\u6bd4\u8f83max_val\u5373\u53ef, max_val\u6700\u9ad8\u7684\u81ea\u7136\u5c31\u662fmatch\u4e0a\u7684\u3002\u5c31\u5728\u6211\u5174\u9ad8\u91c7\u70c8\u7684\u51c6\u5907\u5f00\u59cb\u5199\u89e3\u6cd5\u7684\u65f6\u5019\uff0c\u53c8\u53d1\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"\u96be\u70b92-\u540c\u6a21\u4e0d\u540c\u8272",children:"\u96be\u70b92: \u540c\u6a21\u4e0d\u540c\u8272"}),"\n",(0,s.jsx)(n.p,{children:"\u5728puzzle\u4e2d\u6709\u5f88\u591a\u89d2\u8272\u7684\u6a21\u578b\u4e00\u6837\uff0c\u989c\u8272\u4e5f\u76f8\u5bf9\u63a5\u8fd1\uff0c\u6bd4\u8f83\u7684\u65f6\u5019\u6839\u672c\u65e0\u6cd5\u5206\u522b\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"\u89e3\u51b3\u601d\u8def-1",children:"\u89e3\u51b3\u601d\u8def:"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u7ecf\u8fc7\u4e00\u756a\u67e5\u627e\u6700\u540e\u51b3\u5b9a\u518d\u6bd4\u5bf9\u4e00\u4e0b\u989c\u8272\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"match_area = img[max_loc[1]:max_loc[1]+template.shape[0], max_loc[0]:max_loc[0]+template.shape[1]]\r\nmean1 = cv2.mean(cv2.cvtColor(match_area, cv2.COLOR_BGR2HSV))[:3]\r\nmean2 = cv2.mean(cv2.cvtColor(template, cv2.COLOR_BGR2HSV))[:3]\r\ncolor_diff = np.linalg.norm(np.array(mean1) - np.array(mean2))\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4f7f\u7528\u4e4b\u524dmatchTemplate\u7684\u8fd4\u56de\u503c\u6765\u627e\u5230\u56fe\u50cf\u4e2d\u6700match\u7684\u5730\u65b9\uff0c\u5e76\u628a\u8fd9\u4e00\u90e8\u5206\u622a\u53d6\u4e0b\u6765\u548ctemplate\u505a\u5bf9\u6bd4\u3002color_diff\u6700\u4f4e\u7684\u5c31\u662f\u6211\u4eec\u60f3\u8981\u7684\u56fe\u7247\u4e86"}),"\n",(0,s.jsx)(n.p,{children:"\u4e8e\u662f\u7ecf\u8fc7\u4e00\u756a\u64cd\u4f5c\uff0c\u6211\u4eec\u7ec8\u4e8e\u53ef\u4ee5\u628a\u6bcf\u5f20\u5c0f\u56fe\u90fd\u627e\u5230\u4ed6\u4eec\u5bf9\u5e94\u7684template\uff0c\u6211\u4eec\u518d\u4e3atemplate\u53d6\u4e0aid\uff0c\u8fd9\u6837\u6bcf\u4e2a\u5c0f\u56fe\u90fd\u53ef\u4ee5\u7528\u6570\u5b57\u8868\u793a\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u89e3\u6cd5",children:"\u89e3\u6cd5"}),"\n",(0,s.jsxs)(n.p,{children:["\u539f\u672c\u5199\u4e86bfs\uff0c\u4f46\u662f\u8dd1\u8d77\u6765\u592a\u6162\u4e86\uff0c\u76ee\u6d4b\u65f6\u95f4\u590d\u6742\u5ea6\u81f3\u5c11\u8981",(0,s.jsxs)(n.span,{className:"katex",children:[(0,s.jsx)(n.span,{className:"katex-mathml",children:(0,s.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,s.jsxs)(n.semantics,{children:[(0,s.jsx)(n.mrow,{children:(0,s.jsxs)(n.msup,{children:[(0,s.jsx)(n.mn,{children:"2"}),(0,s.jsxs)(n.mrow,{children:[(0,s.jsx)(n.mn,{children:"30"}),(0,s.jsx)(n.mo,{children:"+"})]})]})}),(0,s.jsx)(n.annotation,{encoding:"application/x-tex",children:"2^{30+}"})]})})}),(0,s.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,s.jsxs)(n.span,{className:"base",children:[(0,s.jsx)(n.span,{className:"strut",style:{height:"0.8141em"}}),(0,s.jsxs)(n.span,{className:"mord",children:[(0,s.jsx)(n.span,{className:"mord",children:"2"}),(0,s.jsx)(n.span,{className:"msupsub",children:(0,s.jsx)(n.span,{className:"vlist-t",children:(0,s.jsx)(n.span,{className:"vlist-r",children:(0,s.jsx)(n.span,{className:"vlist",style:{height:"0.8141em"},children:(0,s.jsxs)(n.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,s.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,s.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,s.jsxs)(n.span,{className:"mord mtight",children:[(0,s.jsx)(n.span,{className:"mord mtight",children:"30"}),(0,s.jsx)(n.span,{className:"mord mtight",children:"+"})]})})]})})})})})]})]})})]})," \u3002\u4e8e\u662f\u8fd8\u662f\u51b3\u5b9a\u66b4\u529b\u505a\u3002\r\n\u9996\u5148\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2atemplate\u90fd\u8bb0\u5f55\u4e86\u4ed6\u4eec\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff0c\u5176\u6b21\u6211\u4eec\u9700\u8981\u4e00\u4e2afunction\u6765\u5224\u65ad\u4e24\u70b9\u662f\u5426\u80fd\u8fde\u63a5\uff0c\u4ee3\u7801\u5982\u4e0b:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"def move(board, st, ed):\r\n\xa0 \xa0 directions = [(0, 1), (0, -1), (1, 0), (-1, 0)]\r\n\xa0 \xa0 def dfs(x, y, turn, dir):\r\n\xa0 \xa0 \xa0 \xa0 if x < 0 or x >= ROW + 2 or y < 0 or y >= COL + 2 or turn > MAX_TURN:\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 return False\r\n\xa0 \xa0 \xa0 \xa0 if (x, y) == ed:\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 board[st[0]][st[1]] = -1\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 board[ed[0]][ed[1]] = -1\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 return True\r\n\xa0 \xa0 \xa0 \xa0 if board[x][y] == BOXES or board[x][y] != -1:\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 return False\r\n\xa0 \xa0 \xa0 \xa0 for next in directions:\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 if next == dir:\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 res = dfs(x + next[0], y + next[1], turn, next)\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 else:\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 res = dfs(x + next[0], y + next[1], turn + 1, next)\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 if res:\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 return True\r\n\xa0 \xa0 \xa0 \xa0 return False\r\n\xa0 \xa0 for dir in directions:\r\n\xa0 \xa0 \xa0 \xa0 if dfs(st[0] + dir[0], st[1] + dir[1], 0, dir):\r\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 return True\r\n\xa0 \xa0 return False\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u91cc\u6211\u4eec\u4f20\u5165\u8d77\u70b9\u548c\u7ec8\u70b9, \u5e76\u5f804\u4e2a\u65b9\u5411\u51fa\u53d1\uff0c\u901a\u8fc7dfs\u6765\u5224\u65ad\u662f\u5426\u80fd\u5728two turn\u7684limit\u91cc\u8fde\u63a5\u4e0a\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u5199\u5b8c\u4ee5\u540e\u6211\u4eec\u53ea\u9700\u8981\u8865\u5145\u70b9pyautogui\u7684\u70b9\u51fb\u64cd\u4f5c\u5c31\u53ef\u4ee5\u5f00\u59cb\u8fd0\u884c\u5566\uff01\u4f8b\u5982:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import pyautogui\r\ndef click(x, y):\r\n\xa0 \xa0 real_x = IMAGEPOS1[0] + x * PIC_WIDTH + PIC_WIDTH / 2\r\n\xa0 \xa0 real_y = IMAGEPOS1[1] + y * PIC_HEIGHT + PIC_HEIGHT / 2\r\n\xa0 \xa0 pyautogui.moveTo(real_x, real_y, duration=0.1)\r\n\xa0 \xa0 # pyautogui.sleep(0.2)\r\n\xa0 \xa0 pyautogui.click()\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u53c8\u6bd4\u65b9\u8bf4\u53ef\u80fd\u9700\u8981\u70b9\u51fb\u67d0\u4e2a\u56fe\u6807(\u4f46\u56fe\u6807\u6211\u4eec\u4e5f\u4e0d\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u51fa\u73b0):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"try: \xa0 \xa0\r\n\tok_pos = pyautogui.locateCenterOnScreen('./img/ok.png')\r\n\tif ok_pos:\r\n\t\tpyautogui.click(ok_pos)\r\nexcept:\r\n\tpass\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5177\u4f53\u4ee3\u7801\u8bf7\u53c2\u8003",(0,s.jsx)(n.a,{href:"https://github.com/Yorafa/Two-Turn-Puzzle-Solver",children:"two turn puzzle solver"})]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var a=r(6540);const s={},t=a.createContext(s);function i(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);