"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5448],{6268:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"Blog Backup/\u4f7f\u7528poste.io + npm\u5efa\u7acb\u90ae\u4ef6\u670d\u52a1\u5668\uff0c\u9644\u4f7f\u7528npm\u65f6LE challenge fail\u548c\u89e3\u51b3\u65e0\u6cd5\u914d\u7f6essl\u7684\u89e3\u51b3\u65b9\u6848","title":"\u4f7f\u7528poste.io + npm\u5efa\u7acb\u90ae\u4ef6\u670d\u52a1\u5668\uff0c\u9644\u4f7f\u7528npm\u65f6LE challenge fail\u548c\u89e3\u51b3\u65e0\u6cd5\u914d\u7f6essl\u7684\u89e3\u51b3\u65b9\u6848","description":"\u5b89\u88c5poste.io","source":"@site/docs/Blog Backup/\u4f7f\u7528poste.io + npm\u5efa\u7acb\u90ae\u4ef6\u670d\u52a1\u5668\uff0c\u9644\u4f7f\u7528npm\u65f6LE challenge fail\u548c\u89e3\u51b3\u65e0\u6cd5\u914d\u7f6essl\u7684\u89e3\u51b3\u65b9\u6848.md","sourceDirName":"Blog Backup","slug":"/Blog Backup/\u4f7f\u7528poste.io + npm\u5efa\u7acb\u90ae\u4ef6\u670d\u52a1\u5668\uff0c\u9644\u4f7f\u7528npm\u65f6LE challenge fail\u548c\u89e3\u51b3\u65e0\u6cd5\u914d\u7f6essl\u7684\u89e3\u51b3\u65b9\u6848","permalink":"/docs/Blog Backup/\u4f7f\u7528poste.io + npm\u5efa\u7acb\u90ae\u4ef6\u670d\u52a1\u5668\uff0c\u9644\u4f7f\u7528npm\u65f6LE challenge fail\u548c\u89e3\u51b3\u65e0\u6cd5\u914d\u7f6essl\u7684\u89e3\u51b3\u65b9\u6848","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u4f7f\u7528docker+frp+npm\uff0c\u8ba9\u65e7\u7535\u8111\u6210\u4e3a\u65b0\u670d\u52a1\u5668","permalink":"/docs/Blog Backup/\u4f7f\u7528docker+frp+npm\uff0c\u8ba9\u65e7\u7535\u8111\u6210\u4e3a\u65b0\u670d\u52a1\u5668"},"next":{"title":"\u53ef\u4ee5\u5199\u7684\u4e1c\u897f","permalink":"/docs/Blog Backup/\u53ef\u4ee5\u5199\u7684\u4e1c\u897f"}}');var s=r(4848),l=r(8453);const i={},c=void 0,a={},d=[{value:"\u5b89\u88c5poste.io",id:"\u5b89\u88c5posteio",level:2},{value:"\u4f7f\u7528npm\u65f6LE challenge fail \u4e5f\u4e0d\u80fd\u914d\u7f6essl\u7684\u89e3\u51b3\u65b9\u6848",id:"\u4f7f\u7528npm\u65f6le-challenge-fail-\u4e5f\u4e0d\u80fd\u914d\u7f6essl\u7684\u89e3\u51b3\u65b9\u6848",level:2},{value:"\u9644\u5f55",id:"\u9644\u5f55",level:2}];function t(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u5b89\u88c5posteio",children:"\u5b89\u88c5poste.io"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u9996\u5148\u8bf7\u786e\u4fdd\u4f60\u6709\u5b89\u88c5docker, \u5982\u679c\u6ca1\u6709\u53ef\u4ee5\u53c2\u8003",(0,s.jsx)(n.a,{href:"%E4%BD%BF%E7%94%A8docker+frp+npm%EF%BC%8C%E8%AE%A9%E6%97%A7%E7%94%B5%E8%84%91%E6%88%90%E4%B8%BA%E6%96%B0%E6%9C%8D%E5%8A%A1%E5%99%A8",children:"\u6587\u7ae0"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u5efa\u8bae\u4f7f\u7528docker compose\u8fdb\u884c\u90e8\u7f72, \u5bf9\u5e94\u7684\u7aef\u53e3\u4ecb\u7ecd\u8bf7\u53c2\u8003",(0,s.jsx)(n.a,{href:"https://poste.io/doc/getting-started",children:"\u5b98\u7f51"}),", \u5982\u679c\u5bf9\u7981\u7528\u53cd\u75c5\u6bd2\u529f\u80fd\uff08DISABLE_CLAMAV\uff09\u3001\u7981\u7528\u53cd\u5783\u573e\u90ae\u4ef6\u529f\u80fd\uff08DISABLE_RSPAMD\uff09\u6709\u9700\u6c42\u53ef\u4ee5\u628a\u5bf9\u5e94\u7684true\u6539\u6210false\u3002\u4f46\u662f\u76f8\u5e94\u7684\uff0c\u53ef\u80fd\u5185\u5b58\u548ccpu\u5360\u7528\u4f1a\u63d0\u9ad8\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:'# docker-compose.yml\r\nservices:\r\n  mailserver:\r\n    image: analogic/poste.io\r\n    container_name: mailserver\r\n    hostname: mail.yourdomain.com\r\n    ports:\r\n      - "25:25"\r\n      - "110:110"\r\n      - "143:143"\r\n      - "587:587"\r\n      - "993:993"\r\n      - "995:995"\r\n      - "4190:4190"\r\n      - "465:465"\r\n      - "8808:80"\r\n      - "8843:443"\r\n    environment:\r\n      - LETSENCRYPT_EMAIL=admin@yourdomain.com\r\n      - LETSENCRYPT_HOST=mail.yourdomain.com\r\n      - VIRTUAL_HOST=mail.yourdomain.com\r\n      - DISABLE_CLAMAV=TRUE\r\n      - DISABLE_RSPAMD=TRUE\r\n      - HTTPS=OFF\r\n    volumes:\r\n      - ./mail-data:/data\r\n    restart: unless-stopped\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528",(0,s.jsx)(n.code,{children:"sudo docker compose up -d"}),"\u542f\u52a8mail server"]}),"\n",(0,s.jsxs)(n.li,{children:["\u786e\u4fdd\u4f60\u7684\u57df\u540d",(0,s.jsx)(n.code,{children:"mail.yourdomain.com"}),"\u5728dns\u89e3\u6790\u4e2d\u89e3\u6790\u5230\u4e86\u4f60\u7684\u670d\u52a1\u5668\u3002 \u66f4\u5177\u4f53\u7684\uff0c\u5728\u4f60\u7684\u57df\u540d\u63d0\u4f9b\u5546\u90a3\u91cc\u9009\u62e9dns\u8bb0\u5f55\uff0c\u5728\u6dfb\u52a0\u65f6\u7c7b\u578b\u9009\u62e9",(0,s.jsx)(n.code,{children:"A"}),"\uff0c \u540d\u79f0\u586b\u5199",(0,s.jsx)(n.code,{children:"mail"}),"\uff0c ipv4\u5730\u5740\u586b\u5199\u4f60\u7684\u670d\u52a1\u5668ip."]}),"\n",(0,s.jsxs)(n.li,{children:["\u7ee7\u7eed\u6dfb\u52a0\u8bb0\u5f55\uff0c\u7c7b\u578b\u9009\u62e9",(0,s.jsx)(n.code,{children:"MX"}),", \u540d\u79f0\u586b\u5199",(0,s.jsx)(n.code,{children:"yourdomain.com"}),"\uff0c\u90ae\u4ef6\u670d\u52a1\u5668\u586b\u5199",(0,s.jsx)(n.code,{children:"mail.yourdomain.com"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u518d\u6dfb\u52a0\u4e09\u4e2aCNAME\u8bb0\u5f55: \u540d\u79f0\u5206\u522b\u4e3a",(0,s.jsx)(n.code,{children:"smtp"}),", ",(0,s.jsx)(n.code,{children:"pop"}),", ",(0,s.jsx)(n.code,{children:"imap"}),", \u76ee\u6807\u5219\u662f",(0,s.jsx)(n.code,{children:"mail.yourdomain.com"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u518d\u6dfb\u52a0txt\u8bb0\u5f55\uff0c\u540d\u79f0",(0,s.jsx)(n.code,{children:"yourdomain.com"}),", \u76ee\u6807",(0,s.jsx)(n.code,{children:'"v=spf1 mx ~all"'})]}),"\n",(0,s.jsxs)(n.li,{children:["\u518d\u6dfb\u52a0txt\u8bb0\u5f55\uff0c\u540d\u79f0",(0,s.jsx)(n.code,{children:"_dmarc.yourdomain.com"}),", \u76ee\u6807",(0,s.jsx)(n.code,{children:'"v=DMARC1; p=none; rua=mailto:dmarc-reports@yourdomain.com"'})," \u8fd9\u91cc\u7684",(0,s.jsx)(n.code,{children:"dmarc-reports@yourdomain.com"}),"\u53ef\u4ee5\u6362\u6210\u4efb\u610f",(0,s.jsx)(n.code,{children:"name@yourdomain.com"})," \u4e0d\u8fc7\u8bb0\u4f4f\u4e00\u4f1a\u5728\u90ae\u7bb1\u670d\u52a1\u5668\u4e2d\u521b\u5efa\u5bf9\u5e94\u8d26\u53f7\u5373\u53ef\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u6253\u5f00\u4f60\u7684npm\uff0c\u5982\u679c\u6ca1\u6709\u914d\u7f6e\u8fc7\u8bf7\u770b\u4e4b\u524d",(0,s.jsx)(n.a,{href:"%E4%BD%BF%E7%94%A8docker+frp+npm%EF%BC%8C%E8%AE%A9%E6%97%A7%E7%94%B5%E8%84%91%E6%88%90%E4%B8%BA%E6%96%B0%E6%9C%8D%E5%8A%A1%E5%99%A8",children:"\u6587\u7ae0"}),"\uff0cadd proxy hosts\u3002domain names\u586b\u5199",(0,s.jsx)(n.code,{children:"mail.yourdomain.com"}),", forward hostname/IP\u586b\u5199",(0,s.jsx)(n.code,{children:"\u4f60\u7684IP"}),", forward port\u586b\u5199",(0,s.jsx)(n.code,{children:"8808"})," save\u3002(\u6211\u5728\u8fd9\u91cc\u628a\u4e0b\u9762\u76843\u4e2a\u9009\u9879\u90fd\u52fe\u4e0a\u4e86\uff0c\u9664\u6b64\u4e4b\u5916\u6211\u8fd8\u8bbe\u7f6e\u4e86SSL certificate\uff0c\u8fd9\u4f7f\u5f97\u6211\u80fd\u76f4\u63a5https\u6253\u5f00\u6211\u7684mail server\u4f46\u662f\u8fd8\u662fle challenge\u6709\u95ee\u9898\uff0c\u6240\u4ee5\u8fd8\u662f\u9700\u8981\u5e95\u4e0b\u7684\u89e3\u51b3\u65b9\u6848)"]}),"\n",(0,s.jsxs)(n.li,{children:["\u6253\u5f00",(0,s.jsx)(n.code,{children:"mail.yourdomain.com"})," \u6309\u7167\u63d0\u793a\u8fdb\u884c\u914d\u7f6e\uff0c\u70b9\u51fb\u4f60\u7684virtual domains\uff0c\u7136\u540e\u70b9\u51fb\u751f\u6210dkim key\u3002\u6839\u636e\u5185\u5bb9\u6253\u5f00\u4f60\u7684dns\u8fd0\u8425\u5546\u7684dns\u8bb0\u5f55\uff0c\u6dfb\u52a0txt\u8bb0\u5f55\uff0c\u540d\u79f0\u586b\u5199\u5185\u5bb9\u4e2d\u7c7b\u4f3c",(0,s.jsx)(n.code,{children:"_s20160910378._domainkey.yourdomain.com"}),"\u7684\u90e8\u5206\uff0c\u76ee\u6807\u5199\u5165\u5185\u5bb9\u4e2d\u7c7b\u4f3c",(0,s.jsx)(n.code,{children:'"k=rsa;p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0FvkMuwN46vvtQCC1JZz7XzRE+l+Lf8/5XUKwWJXOcE7dJoZBbOE0Gz85phZ2q+y4l8D7t/hXDz9q+6/KVQDgJ9muaxSM/uS+KG0ds0QLEiV0GYCVu+ZZQSNPBPjOwlDvo3LraW00lMpd5dUj+xpr07ShfIoULhi7/7t76n5GZMse9yBa4hIhxSG/wCAB4D6IWYBURz9Pc75IDPDTlImr3TP/82YrsULY70CHaPHA1+j1VPA5lE+tnmeqxJW6P537xSutDppv8BZg4nlF3ojg2k6LB/cq15C4QRPAMs77pRA4GVnys1LEJ3JDvV3/csOCZ49oC4m44/TnWXk057OAwIDAQAB"'}),"\u7684\u90e8\u5206"]}),"\n",(0,s.jsx)(n.li,{children:"\u73b0\u5728\u9664\u4e86\u6ca1\u6709\u914d\u7f6essl\u4e00\u5207\u90fd\u914d\u7f6e\u597d\u4e86"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u4f7f\u7528npm\u65f6le-challenge-fail-\u4e5f\u4e0d\u80fd\u914d\u7f6essl\u7684\u89e3\u51b3\u65b9\u6848",children:"\u4f7f\u7528npm\u65f6LE challenge fail \u4e5f\u4e0d\u80fd\u914d\u7f6essl\u7684\u89e3\u51b3\u65b9\u6848"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/NginxProxyManager/nginx-proxy-manager/issues/210#issuecomment-1068955629",children:"\u89e3\u51b3\u65b9\u6848\u6765\u81eaNginx Proxy Manager Github Issue"})," \u548c",(0,s.jsx)(n.a,{href:"https://poste.io/doc/faq",children:"\u5b98\u7f51doc"})]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u9996\u5148\u8bf7\u786e\u4fdd\u4f60\u6709\u5b89\u88c5docker, \u5982\u679c\u6ca1\u6709\u53ef\u4ee5\u53c2\u8003",(0,s.jsx)(n.a,{href:"%E4%BD%BF%E7%94%A8docker+frp+npm%EF%BC%8C%E8%AE%A9%E6%97%A7%E7%94%B5%E8%84%91%E6%88%90%E4%B8%BA%E6%96%B0%E6%9C%8D%E5%8A%A1%E5%99%A8",children:"\u6587\u7ae0"})]}),"\n",(0,s.jsx)(n.li,{children:"\u5982\u679c\u4f7f\u7528docker-compose\u8fdb\u884c\u90e8\u7f72\uff0c\u9700\u8981\u5728volume\u4e2d\u989d\u5916\u6dfb\u52a0well-known\u7684\u5730\u5740\u3002\u6700\u597d\u4f7f\u7528github issue\u4e2d\u63d0\u5230\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u5373\u521b\u5efa\u4e00\u4e2adocker volume\u4f7f\u5f97npm\u548cposte io\u90fd\u53ef\u4ee5\u4f7f\u7528."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# can use this command to creat\r\nsudo docker volume create well-known\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u521b\u5efa\u4ee5\u540e\u5728\u4ee5\u4e0b\u6587\u4ef6\u4e2d\u6dfb\u52a0(\u5982\u679c\u4e0d\u60f3\u53eb\u505awell-known\uff0c\u8bf7\u786e\u4fdd\u4e0b\u9762well-known\u66ff\u6362\u6210\u4f60\u7684volume name):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:'# docker-compose.yml\r\nservices:\r\n  mailserver:\r\n    image: analogic/poste.io\r\n    container_name: mailserver\r\n    hostname: mail.yourdomain.com\r\n    ports:\r\n      - "25:25"\r\n      - "110:110"\r\n      - "143:143"\r\n      - "587:587"\r\n      - "993:993"\r\n      - "995:995"\r\n      - "4190:4190"\r\n      - "465:465"\r\n      - "8808:80"\r\n      - "8843:443"\r\n    environment:\r\n      - LETSENCRYPT_EMAIL=admin@yourdomain.com\r\n      - LETSENCRYPT_HOST=mail.yourdomain.com\r\n      - VIRTUAL_HOST=mail.yourdomain.com\r\n      - DISABLE_CLAMAV=TRUE\r\n      - DISABLE_RSPAMD=TRUE\r\n      - HTTPS=OFF\r\n    volumes:\r\n      - ./mail-data:/data\r\n      - well-known:/opt/www/.well-known\r\n    restart: unless-stopped\r\nvolumes:\r\n  well-known:\r\n\texternal: true\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528",(0,s.jsx)(n.code,{children:"sudo docker compose restart"})," \u540e\u518d\u53bb\u4f60\u7684mail server\u70b9\u51fbsystem settings\uff0c\u70b9\u51fbTLS certificate\uff0c\u5e26\u70b9\u51fbchange certificate settings. \u52fe\u9009enabled, common name\u91cc\u5199\u5165",(0,s.jsx)(n.code,{children:"mail.yourdomain.com"}),"\uff0c alternative names\u91cc\u5199\u5165",(0,s.jsx)(n.code,{children:"smtp.yourdomain.com"}),", ",(0,s.jsx)(n.code,{children:"pop.yourdomain.com"}),",",(0,s.jsx)(n.code,{children:"imap.yourdomain.com"})," \u70b9\u51fbsave changes\u5373\u53ef"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u9644\u5f55",children:"\u9644\u5f55"}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u91cc\u8fd8\u63a8\u8350\u51e0\u4e2a\u6d4b\u8bd5\u7f51\u7ad9"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://mxtoolbox.com/",children:"MX ToolBox"}),": \u53ef\u4ee5\u68c0\u67e5dmarc\uff0csmtp\u7b49\u662f\u5426\u8bbe\u7f6e\u6b63\u786e"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.mail-tester.com/",children:"mail tester"}),": test the spammyness of  your emails."]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>c});var o=r(6540);const s={},l=o.createContext(s);function i(e){const n=o.useContext(l);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);