"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2127],{3728:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>a,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Operating Systems/Linux Programming/ProcessModel","title":"Process Model","description":"We can design program that run other program. We should first know:","source":"@site/docs/Operating Systems/Linux Programming/ProcessModel.md","sourceDirName":"Operating Systems/Linux Programming","slug":"/Operating Systems/Linux Programming/ProcessModel","permalink":"/docs/Operating Systems/Linux Programming/ProcessModel","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Pointer and Memory","permalink":"/docs/Operating Systems/Linux Programming/Pointer & Memory"},"next":{"title":"Read & Write in File","permalink":"/docs/Operating Systems/Linux Programming/Read&Write in file"}}');var r=s(4848),c=s(8453);const l={},t="Process Model",o={},d=[{value:"Use System Call create Process",id:"use-system-call-create-process",level:2},{value:"Process Ordering",id:"process-ordering",level:2},{value:"Conclusion with example",id:"conclusion-with-example",level:2},{value:"Some system function",id:"some-system-function",level:2}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"process-model",children:"Process Model"})}),"\n",(0,r.jsx)(n.p,{children:"We can design program that run other program. We should first know:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Program"}),": The ",(0,r.jsx)(n.em,{children:"executable"})," instructions of a program, it either can be:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Source Code"}),"\n",(0,r.jsx)(n.li,{children:"Compiled machine code"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Process"}),": Running instance of a program"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Machine code of the program"}),"\n",(0,r.jsxs)(n.li,{children:["Infor about current state, presented by","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Code"}),"\n",(0,r.jsx)(n.li,{children:"Global"}),"\n",(0,r.jsx)(n.li,{children:"Heap"}),"\n",(0,r.jsx)(n.li,{children:"Stack"}),"\n",(0,r.jsx)(n.li,{children:"Notice: Memory is not shared between processes."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"operating system decides process order"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Process hold by a ",(0,r.jsx)(n.strong,{children:"Process Control Block"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PID (Process ID): the id of current process"}),"\n",(0,r.jsx)(n.li,{children:"PC (Program Counter): the next instruction to be executed"}),"\n",(0,r.jsx)(n.li,{children:"SP (Stack Pointer): identifies the top of stack"}),"\n",(0,r.jsx)(n.li,{children:"actions"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The number ",(0,r.jsx)(n.strong,{children:"processor"})," labeled as CPUs control how many processes can be executing an instruction at the same time."]}),"\n",(0,r.jsx)(n.p,{children:"Processes in different states:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Running State: the running processes"}),"\n",(0,r.jsx)(n.li,{children:"Ready State: the processes wait CPUs available"}),"\n",(0,r.jsx)(n.li,{children:"Blocked State the processes wait an event to occur"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"use-system-call-create-process",children:"Use System Call create Process"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"fork"}),": create a child process (duplicate a process)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"same code with parent process; same PC, SP"}),"\n",(0,r.jsx)(n.li,{children:"variable value may difference with using parent/child process (like PID)"}),"\n",(0,r.jsx)(n.li,{children:"inherit most variable values, even loops"}),"\n",(0,r.jsx)(n.li,{children:"different PID"}),"\n",(0,r.jsxs)(n.li,{children:["different return value (child process return PID or -1 when fails)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"return 0 in child process (parent fork child, child fork)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"execl"}),": the same process to execute different code, will not return back to original code if not fails"]}),"\n",(0,r.jsx)(n.h2,{id:"process-ordering",children:"Process Ordering"}),"\n",(0,r.jsxs)(n.p,{children:["If a parent process terminates before children processes terminate, then the children's parent will be PID 1 process (",(0,r.jsx)(n.code,{children:"init process"}),"), that is 'children'(orphan) become 'parent'"]}),"\n",(0,r.jsx)(n.p,{children:"If the children  process terminate but without parent call, then the termination status will be collected. As the parent process terminates, those process will be deleted."}),"\n",(0,r.jsx)(n.h2,{id:"conclusion-with-example",children:"Conclusion with example"}),"\n",(0,r.jsx)(n.p,{children:"when we run program on shell"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"shell"})," is a  process, t use ",(0,r.jsx)(n.code,{children:"fork"})," execute the program we ask as a new process"]}),"\n",(0,r.jsxs)(n.li,{children:["this child process call ",(0,r.jsx)(n.code,{children:"execl"})," to load different program"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"shell"})," call ",(0,r.jsx)(n.code,{children:"wait"})," and  blocks 'till the child process finishes executing"]}),"\n",(0,r.jsxs)(n.li,{children:["process terminated, ",(0,r.jsx)(n.code,{children:"shell"})," ready for next command"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"some-system-function",children:"Some system function"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"int getpid()"}),": get process id of current process"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"int getppid()"}),": get parent process id of current process"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usleep"}),": suspend execution for microsecond intervals"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"int wait()"}),": wait for process termination (only for child process)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WIFEXITED(int status)"}),": true if child process ended normally","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WEXITSTATUS(int status)"}),": get the exit code of child process"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WIFSIGNALED(int status)"}),":  True when a signal caused to exit","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WTERMSIG(int status)"}),": Use to determine which signal raised by the child process to terminate"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WIFSTOPPED(int status)"}),": True when child process stopped","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WSTOPSIG(int status)"}),": Determine which signal stopped child process"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"int waitpid(int pid, int *stat, int options)"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options = WNOHANG"})," return ",(0,r.jsx)(n.code,{children:"-1"})," immediately instead waiting if no child process ready to be noticed and set ",(0,r.jsx)(n.code,{children:"ERRNO"})," to ",(0,r.jsx)(n.code,{children:"ECHILD"})," (means no child process), else ",(0,r.jsx)(n.code,{children:"0"}),"exists some zombie child process"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"abort"}),": cause abnormal process termination"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pipe"}),": create pipe"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"signal"}),": ANSI C signal handling"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"int execl(const char*path, const char*arg0,...)"}),":  execute a file"]}),"\n",(0,r.jsxs)(n.li,{children:["there are family of ",(0,r.jsx)(n.code,{children:"execl"})," function, we can determinate what we want to use by the letter:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"l"}),": list"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"v"}),": vector"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"p"}),": path (no ",(0,r.jsx)(n.code,{children:"p"})," means empty path or path already given)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"e"}),": environment"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"int execvp(const char *file, char * argv[])"}),":"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var i=s(6540);const r={},c=i.createContext(r);function l(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);